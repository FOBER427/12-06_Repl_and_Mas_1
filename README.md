# "Домашнее задание к занятию «Репликация и масштабирование. Часть 1»" - Хомяков Антон.

#### Задание 1

На лекции рассматривались режимы репликации master-slave, master-master, опишите их различия.

*Ответить в свободной форме.*

#### Решение 1

### Master-Slave
В этой архитектуре есть один главный сервер — Master, который обрабатывает все операции записи, а остальные — Slaves — лишь считывают с него данные. Это позволяет распределить нагрузку на чтение и обеспечить высокую доступность: даже если Master выходит из строя, Slaves могут продолжать обслуживать запросы на чтение.

Но у этой схемы есть и недостатки:
- Все операции записи идут через Master, и он становится узким местом при высокой нагрузке.
- Если Master падает, его нужно срочно восстанавливать или назначать одного из Slaves новым Master'ом, что требует времени и вмешательства.

### Master-Master
В этой схеме каждый сервер одновременно выполняет роли и Master, и Slave — можно как читать, так и писать данные на любом из них. 

Это:
- равномерно распределяет нагрузку на запись;
- повышает отказоустойчивость: при падении одного сервера другой тут же подхватывает работу;
- улучшает масштабируемость.

Но не всё так просто. Master-Master требует более сложной настройки и продуманной системы разрешения конфликтов, так как одновременные изменения одних и тех же данных на разных узлах могут привести к несогласованности.


---

### Задание 2

Выполните конфигурацию master-slave репликации, примером можно пользоваться из лекции.

*Приложите скриншоты конфигурации, выполнения работы: состояния и режимы работы серверов.*

### Решение 2

```
192.168.56.117 — Master
192.168.56.116 — Slave
```

Cкриншот конфигурации MASTER:

```
SHOW MASTER STATUS;
```
![Скриншот 1](img/1.png)

```
SELECT user, host, plugin FROM mysql.user WHERE user = 'replica';
```
![Скриншот 1](img/1.1.png)

```
Настройка Master-сервера (192.168.56.117) /etc/mysql/mysql.conf.d/mysqld.cnf
```
![Скриншот 1](img/1.2.png)


Скриншот конфигурации SLAVE:

```
SHOW SLAVE STATUS\G
```
![Скриншот 2](img/2.png)
```
Slave_IO_Running: Yes
Slave_SQL_Running: Yes
```

```
Настройка Master-сервера (192.168.56.116) cat /etc/mysql/mysql.conf.d/mysqld.cnf
```
![Скриншот 2](img/2.1.png)



---
## Дополнительные задания (со звёздочкой*)
Эти задания дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже шире разобраться в материале.

---

### Задание 3* 

Выполните конфигурацию master-master репликации. Произведите проверку.

*Приложите скриншоты конфигурации, выполнения работы: состояния и режимы работы серверов.*

### Решение 3

Cкриншот конфигурации SHOW MASTER STATUS на двух ВМ:

![Скриншот 3](img/3.png)

```
START SLAVE
```
![Скриншот 3](img/3.1.png)

```
SHOW BINARY LOGS
```
![Скриншот 3](img/3.2.png)


Cкриншот состояния и режимы работы MASTER 192.168.56.116:
```
CHANGE MASTER TO
```
![Скриншот 3](img/3.3.png)

---
